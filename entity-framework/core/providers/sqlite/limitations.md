---
title: Fournisseur de base de données SQLite-limitations-EF Core
description: Limitations du fournisseur de base de données Entity Framework Core SQLite par rapport aux autres fournisseurs
author: bricelam
ms.date: 09/24/2020
uid: core/providers/sqlite/limitations
ms.openlocfilehash: 3d696474d401e8fd6c26a78067d292f0bb97a457
ms.sourcegitcommit: 0a25c03fa65ae6e0e0e3f66bac48d59eceb96a5a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/14/2020
ms.locfileid: "92062735"
---
# <a name="sqlite-ef-core-database-provider-limitations"></a><span data-ttu-id="99c30-103">Limites d’un fournisseur de base de données EF Core SQLite</span><span class="sxs-lookup"><span data-stu-id="99c30-103">SQLite EF Core Database Provider Limitations</span></span>

<span data-ttu-id="99c30-104">Le fournisseur SQLite a un certain nombre de limitations de migrations.</span><span class="sxs-lookup"><span data-stu-id="99c30-104">The SQLite provider has a number of migrations limitations.</span></span> <span data-ttu-id="99c30-105">La plupart de ces limitations résultent de limitations dans le moteur de base de données SQLite sous-jacent et ne sont pas spécifiques à EF.</span><span class="sxs-lookup"><span data-stu-id="99c30-105">Most of these limitations are a result of limitations in the underlying SQLite database engine and are not specific to EF.</span></span>

## <a name="modeling-limitations"></a><span data-ttu-id="99c30-106">Limitations de la modélisation</span><span class="sxs-lookup"><span data-stu-id="99c30-106">Modeling limitations</span></span>

<span data-ttu-id="99c30-107">La bibliothèque relationnelle commune (partagée par Entity Framework fournisseurs de bases de données relationnelles) définit des API pour les concepts de modélisation communs à la plupart des moteurs de base de données relationnelle.</span><span class="sxs-lookup"><span data-stu-id="99c30-107">The common relational library (shared by Entity Framework relational database providers) defines APIs for modelling concepts that are common to most relational database engines.</span></span> <span data-ttu-id="99c30-108">Quelques-uns de ces concepts ne sont pas pris en charge par le fournisseur SQLite.</span><span class="sxs-lookup"><span data-stu-id="99c30-108">A couple of these concepts are not supported by the SQLite provider.</span></span>

* <span data-ttu-id="99c30-109">Schémas</span><span class="sxs-lookup"><span data-stu-id="99c30-109">Schemas</span></span>
* <span data-ttu-id="99c30-110">Séquences</span><span class="sxs-lookup"><span data-stu-id="99c30-110">Sequences</span></span>

## <a name="query-limitations"></a><span data-ttu-id="99c30-111">Limitations des requêtes</span><span class="sxs-lookup"><span data-stu-id="99c30-111">Query limitations</span></span>

<span data-ttu-id="99c30-112">SQLite ne prend pas en charge en mode natif les types de données suivants.</span><span class="sxs-lookup"><span data-stu-id="99c30-112">SQLite doesn't natively support the following data types.</span></span> <span data-ttu-id="99c30-113">EF Core pouvez lire et écrire des valeurs de ces types, et l’interrogation de l’égalité ( `where e.Property == value` ) est également prise en charge.</span><span class="sxs-lookup"><span data-stu-id="99c30-113">EF Core can read and write values of these types, and querying for equality (`where e.Property == value`) is also supported.</span></span> <span data-ttu-id="99c30-114">Toutefois, d’autres opérations, comme la comparaison et le tri, nécessitent une évaluation sur le client.</span><span class="sxs-lookup"><span data-stu-id="99c30-114">Other operations, however, like comparison and ordering will require evaluation on the client.</span></span>

* <span data-ttu-id="99c30-115">DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="99c30-115">DateTimeOffset</span></span>
* <span data-ttu-id="99c30-116">Decimal</span><span class="sxs-lookup"><span data-stu-id="99c30-116">Decimal</span></span>
* <span data-ttu-id="99c30-117">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="99c30-117">TimeSpan</span></span>
* <span data-ttu-id="99c30-118">UInt64</span><span class="sxs-lookup"><span data-stu-id="99c30-118">UInt64</span></span>

<span data-ttu-id="99c30-119">Au lieu de `DateTimeOffset` , nous vous recommandons d’utiliser des valeurs DateTime.</span><span class="sxs-lookup"><span data-stu-id="99c30-119">Instead of `DateTimeOffset`, we recommend using DateTime values.</span></span> <span data-ttu-id="99c30-120">Lors de la gestion de plusieurs fuseaux horaires, nous vous recommandons de convertir les valeurs en temps UTC avant de les enregistrer, puis de les reconvertir dans le fuseau horaire approprié.</span><span class="sxs-lookup"><span data-stu-id="99c30-120">When handling multiple time zones, we recommend converting the values to UTC before saving and then converting back to the appropriate time zone.</span></span>

<span data-ttu-id="99c30-121">Le `Decimal` type fournit un niveau élevé de précision.</span><span class="sxs-lookup"><span data-stu-id="99c30-121">The `Decimal` type provides a high level of precision.</span></span> <span data-ttu-id="99c30-122">Toutefois, si vous n’avez pas besoin de ce niveau de précision, nous vous recommandons d’utiliser à la place un double.</span><span class="sxs-lookup"><span data-stu-id="99c30-122">If you don't need that level of precision, however, we recommend using double instead.</span></span> <span data-ttu-id="99c30-123">Vous pouvez utiliser un [convertisseur de valeur](xref:core/modeling/value-conversions) pour continuer à utiliser Decimal dans vos classes.</span><span class="sxs-lookup"><span data-stu-id="99c30-123">You can use a [value converter](xref:core/modeling/value-conversions) to continue using decimal in your classes.</span></span>

```csharp
modelBuilder.Entity<MyEntity>()
    .Property(e => e.DecimalProperty)
    .HasConversion<double>();
```

## <a name="migrations-limitations"></a><span data-ttu-id="99c30-124">Limitations des migrations</span><span class="sxs-lookup"><span data-stu-id="99c30-124">Migrations limitations</span></span>

<span data-ttu-id="99c30-125">Le moteur de base de données SQLite ne prend pas en charge un certain nombre d’opérations de schéma prises en charge par la plupart des autres bases de données relationnelles.</span><span class="sxs-lookup"><span data-stu-id="99c30-125">The SQLite database engine does not support a number of schema operations that are supported by the majority of other relational databases.</span></span> <span data-ttu-id="99c30-126">Si vous tentez d’appliquer l’une des opérations non prises en charge à une base de données SQLite, une `NotSupportedException` exception est levée.</span><span class="sxs-lookup"><span data-stu-id="99c30-126">If you attempt to apply one of the unsupported operations to a SQLite database then a `NotSupportedException` will be thrown.</span></span>

<span data-ttu-id="99c30-127">Une régénération sera tentée afin d’effectuer certaines opérations.</span><span class="sxs-lookup"><span data-stu-id="99c30-127">A rebuild will be attempted in order to perform certain operations.</span></span> <span data-ttu-id="99c30-128">Les reconstructions sont possibles uniquement pour les artefacts de base de données qui font partie de votre modèle de EF Core.</span><span class="sxs-lookup"><span data-stu-id="99c30-128">Rebuilds are only possible for database artifacts that are part of your EF Core model.</span></span> <span data-ttu-id="99c30-129">Si un artefact de base de données ne fait pas partie du modèle, par exemple, s’il a été créé manuellement à l’intérieur d’une migration, alors une `NotSupportedException` est toujours levée.</span><span class="sxs-lookup"><span data-stu-id="99c30-129">If a database artifact isn't part of the model--for example, if it was created manually inside a migration--then a `NotSupportedException` is still thrown.</span></span>

| <span data-ttu-id="99c30-130">Opération</span><span class="sxs-lookup"><span data-stu-id="99c30-130">Operation</span></span>            | <span data-ttu-id="99c30-131">Pris en charge ?</span><span class="sxs-lookup"><span data-stu-id="99c30-131">Supported?</span></span>  | <span data-ttu-id="99c30-132">Version requise</span><span class="sxs-lookup"><span data-stu-id="99c30-132">Requires version</span></span> |
|:---------------------|:------------|:-----------------|
| <span data-ttu-id="99c30-133">AddCheckConstraint</span><span class="sxs-lookup"><span data-stu-id="99c30-133">AddCheckConstraint</span></span>   | <span data-ttu-id="99c30-134">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-134">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-135">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-135">5.0</span></span>              |
| <span data-ttu-id="99c30-136">AddColumn</span><span class="sxs-lookup"><span data-stu-id="99c30-136">AddColumn</span></span>            | <span data-ttu-id="99c30-137">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-137">✔</span></span>           |                  |
| <span data-ttu-id="99c30-138">AddForeignKey</span><span class="sxs-lookup"><span data-stu-id="99c30-138">AddForeignKey</span></span>        | <span data-ttu-id="99c30-139">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-139">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-140">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-140">5.0</span></span>              |
| <span data-ttu-id="99c30-141">AddPrimaryKey</span><span class="sxs-lookup"><span data-stu-id="99c30-141">AddPrimaryKey</span></span>        | <span data-ttu-id="99c30-142">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-142">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-143">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-143">5.0</span></span>              |
| <span data-ttu-id="99c30-144">AddUniqueConstraint</span><span class="sxs-lookup"><span data-stu-id="99c30-144">AddUniqueConstraint</span></span>  | <span data-ttu-id="99c30-145">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-145">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-146">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-146">5.0</span></span>              |
| <span data-ttu-id="99c30-147">AlterColumn</span><span class="sxs-lookup"><span data-stu-id="99c30-147">AlterColumn</span></span>          | <span data-ttu-id="99c30-148">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-148">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-149">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-149">5.0</span></span>              |
| <span data-ttu-id="99c30-150">CreateIndex</span><span class="sxs-lookup"><span data-stu-id="99c30-150">CreateIndex</span></span>          | <span data-ttu-id="99c30-151">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-151">✔</span></span>           |                  |
| <span data-ttu-id="99c30-152">CreateTable</span><span class="sxs-lookup"><span data-stu-id="99c30-152">CreateTable</span></span>          | <span data-ttu-id="99c30-153">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-153">✔</span></span>           |                  |
| <span data-ttu-id="99c30-154">DropCheckConstraint</span><span class="sxs-lookup"><span data-stu-id="99c30-154">DropCheckConstraint</span></span>  | <span data-ttu-id="99c30-155">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-155">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-156">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-156">5.0</span></span>              |
| <span data-ttu-id="99c30-157">DropColumn</span><span class="sxs-lookup"><span data-stu-id="99c30-157">DropColumn</span></span>           | <span data-ttu-id="99c30-158">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-158">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-159">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-159">5.0</span></span>              |
| <span data-ttu-id="99c30-160">DropForeignKey</span><span class="sxs-lookup"><span data-stu-id="99c30-160">DropForeignKey</span></span>       | <span data-ttu-id="99c30-161">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-161">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-162">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-162">5.0</span></span>              |
| <span data-ttu-id="99c30-163">DROP index</span><span class="sxs-lookup"><span data-stu-id="99c30-163">DropIndex</span></span>            | <span data-ttu-id="99c30-164">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-164">✔</span></span>           |                  |
| <span data-ttu-id="99c30-165">DropPrimaryKey</span><span class="sxs-lookup"><span data-stu-id="99c30-165">DropPrimaryKey</span></span>       | <span data-ttu-id="99c30-166">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-166">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-167">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-167">5.0</span></span>              |
| <span data-ttu-id="99c30-168">DropTable</span><span class="sxs-lookup"><span data-stu-id="99c30-168">DropTable</span></span>            | <span data-ttu-id="99c30-169">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-169">✔</span></span>           |                  |
| <span data-ttu-id="99c30-170">DropUniqueConstraint</span><span class="sxs-lookup"><span data-stu-id="99c30-170">DropUniqueConstraint</span></span> | <span data-ttu-id="99c30-171">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-171">✔ (rebuild)</span></span> | <span data-ttu-id="99c30-172">5.0</span><span class="sxs-lookup"><span data-stu-id="99c30-172">5.0</span></span>              |
| <span data-ttu-id="99c30-173">RenameColumn</span><span class="sxs-lookup"><span data-stu-id="99c30-173">RenameColumn</span></span>         | <span data-ttu-id="99c30-174">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-174">✔</span></span>           | <span data-ttu-id="99c30-175">2.2</span><span class="sxs-lookup"><span data-stu-id="99c30-175">2.2</span></span>              |
| <span data-ttu-id="99c30-176">RenameIndex</span><span class="sxs-lookup"><span data-stu-id="99c30-176">RenameIndex</span></span>          | <span data-ttu-id="99c30-177">✔ (régénération)</span><span class="sxs-lookup"><span data-stu-id="99c30-177">✔ (rebuild)</span></span> |                  |
| <span data-ttu-id="99c30-178">RenameTable</span><span class="sxs-lookup"><span data-stu-id="99c30-178">RenameTable</span></span>          | <span data-ttu-id="99c30-179">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-179">✔</span></span>           |                  |
| <span data-ttu-id="99c30-180">EnsureSchema</span><span class="sxs-lookup"><span data-stu-id="99c30-180">EnsureSchema</span></span>         | <span data-ttu-id="99c30-181">✔ (aucune opération)</span><span class="sxs-lookup"><span data-stu-id="99c30-181">✔ (no-op)</span></span>   |                  |
| <span data-ttu-id="99c30-182">DropSchema</span><span class="sxs-lookup"><span data-stu-id="99c30-182">DropSchema</span></span>           | <span data-ttu-id="99c30-183">✔ (aucune opération)</span><span class="sxs-lookup"><span data-stu-id="99c30-183">✔ (no-op)</span></span>   |                  |
| <span data-ttu-id="99c30-184">Insérer</span><span class="sxs-lookup"><span data-stu-id="99c30-184">Insert</span></span>               | <span data-ttu-id="99c30-185">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-185">✔</span></span>           |                  |
| <span data-ttu-id="99c30-186">Update</span><span class="sxs-lookup"><span data-stu-id="99c30-186">Update</span></span>               | <span data-ttu-id="99c30-187">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-187">✔</span></span>           |                  |
| <span data-ttu-id="99c30-188">Supprimer</span><span class="sxs-lookup"><span data-stu-id="99c30-188">Delete</span></span>               | <span data-ttu-id="99c30-189">✔</span><span class="sxs-lookup"><span data-stu-id="99c30-189">✔</span></span>           |                  |

### <a name="migrations-limitations-workaround"></a><span data-ttu-id="99c30-190">Solution de contournement des limitations des migrations</span><span class="sxs-lookup"><span data-stu-id="99c30-190">Migrations limitations workaround</span></span>

<span data-ttu-id="99c30-191">Vous pouvez contourner certaines de ces limitations en écrivant manuellement du code dans vos migrations pour effectuer une reconstruction.</span><span class="sxs-lookup"><span data-stu-id="99c30-191">You can workaround some of these limitations by manually writing code in your migrations to perform a rebuild.</span></span> <span data-ttu-id="99c30-192">Les reconstructions de tables impliquent la création d’une nouvelle table, la copie de données dans la nouvelle table, la suppression de l’ancienne table et la modification du nom de la nouvelle table.</span><span class="sxs-lookup"><span data-stu-id="99c30-192">Table rebuilds involve creating a new table, copying data to the new table, dropping the old table, renaming the new table.</span></span> <span data-ttu-id="99c30-193">Vous devrez utiliser la `Sql(string)` méthode pour effectuer certaines de ces étapes.</span><span class="sxs-lookup"><span data-stu-id="99c30-193">You will need to use the `Sql(string)` method to perform some of these steps.</span></span>

<span data-ttu-id="99c30-194">Pour plus d’informations, consultez [création d’autres types de modifications de schéma de table](https://sqlite.org/lang_altertable.html#otheralter) dans la documentation sqlite.</span><span class="sxs-lookup"><span data-stu-id="99c30-194">See [Making Other Kinds Of Table Schema Changes](https://sqlite.org/lang_altertable.html#otheralter) in the SQLite documentation for more details.</span></span>

### <a name="idempotent-script-limitations"></a><span data-ttu-id="99c30-195">Limitations des scripts idempotent</span><span class="sxs-lookup"><span data-stu-id="99c30-195">Idempotent script limitations</span></span>

<span data-ttu-id="99c30-196">Contrairement aux autres bases de données, SQLite n’inclut pas de langage procédural.</span><span class="sxs-lookup"><span data-stu-id="99c30-196">Unlike other databases, SQLite doesn't include a procedural language.</span></span> <span data-ttu-id="99c30-197">Pour cette raison, il n’existe aucun moyen de générer la logique si-Then requise par les scripts de migration idempotent.</span><span class="sxs-lookup"><span data-stu-id="99c30-197">Because of this, there is no way to generate the if-then logic required by the idempotent migration scripts.</span></span>

<span data-ttu-id="99c30-198">Si vous connaissez la dernière migration appliquée à une base de données, vous pouvez générer un script à partir de cette migration vers la dernière migration.</span><span class="sxs-lookup"><span data-stu-id="99c30-198">If you know the last migration applied to a database, you can generate a script from that migration to the latest migration.</span></span>

```dotnetcli
dotnet ef migrations script CurrentMigration
```

<span data-ttu-id="99c30-199">Dans le cas contraire, nous vous recommandons `dotnet ef database update` d’utiliser pour appliquer des migrations.</span><span class="sxs-lookup"><span data-stu-id="99c30-199">Otherwise, we recommend using `dotnet ef database update` to apply migrations.</span></span> <span data-ttu-id="99c30-200">À partir de EF Core 5,0, vous pouvez spécifier le fichier de base de données lors de l’exécution de la commande.</span><span class="sxs-lookup"><span data-stu-id="99c30-200">Starting in EF Core 5.0, you can specify the database file when running the command.</span></span>

```dotnetcli
dotnet ef database update --connection "Data Source=My.db"
```

## <a name="see-also"></a><span data-ttu-id="99c30-201">Voir également</span><span class="sxs-lookup"><span data-stu-id="99c30-201">See also</span></span>

* [<span data-ttu-id="99c30-202">Limitations de Microsoft. Data. sqlite Async</span><span class="sxs-lookup"><span data-stu-id="99c30-202">Microsoft.Data.Sqlite Async Limitations</span></span>](/dotnet/standard/data/sqlite/async)
* [<span data-ttu-id="99c30-203">Limitations de Microsoft. Data. sqlite ADO.NET</span><span class="sxs-lookup"><span data-stu-id="99c30-203">Microsoft.Data.Sqlite ADO.NET Limitations</span></span>](/dotnet/standard/data/sqlite/adonet-limitations)
