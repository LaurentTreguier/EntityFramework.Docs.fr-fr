---
title: Vue d’ensemble d’Entity Framework Core - EF Core
description: Présentation générale de Entity Framework Core
author: ajcvickers
ms.date: 9/20/2020
uid: core/index
ms.openlocfilehash: ccb1fa4cbc0bd1a02e1aeb613475bfe4b2c1d118
ms.sourcegitcommit: f3512e3a98e685a3ba409c1d0157ce85cc390cf4
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/10/2020
ms.locfileid: "94429895"
---
# <a name="entity-framework-core"></a><span data-ttu-id="33fbf-103">Entity Framework Core</span><span class="sxs-lookup"><span data-stu-id="33fbf-103">Entity Framework Core</span></span>

<span data-ttu-id="33fbf-104">Entity Framework (EF) Core est une version légère, extensible, [open source](https://github.com/dotnet/efcore) et multiplateforme de la très connue technologie d’accès aux données Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="33fbf-104">Entity Framework (EF) Core is a lightweight, extensible, [open source](https://github.com/dotnet/efcore) and cross-platform version of the popular Entity Framework data access technology.</span></span>

<span data-ttu-id="33fbf-105">EF Core peut servir de Mappeur relationnel objet (O/RM), qui :</span><span class="sxs-lookup"><span data-stu-id="33fbf-105">EF Core can serve as an object-relational mapper (O/RM), which:</span></span>

* <span data-ttu-id="33fbf-106">Permet aux développeurs .NET de travailler avec une base de données à l’aide d’objets .NET.</span><span class="sxs-lookup"><span data-stu-id="33fbf-106">Enables .NET developers to work with a database using .NET objects.</span></span>
* <span data-ttu-id="33fbf-107">Élimine la nécessité de la plupart du code d’accès aux données qui doit généralement être écrit.</span><span class="sxs-lookup"><span data-stu-id="33fbf-107">Eliminates the need for most of the data-access code that typically needs to be written.</span></span>

<span data-ttu-id="33fbf-108">EF Core prend en charge de nombreux moteurs de base de données ; consultez [Fournisseurs de base de données](xref:core/providers/index) pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="33fbf-108">EF Core supports many database engines, see [Database Providers](xref:core/providers/index) for details.</span></span>

## <a name="the-model"></a><span data-ttu-id="33fbf-109">Le modèle</span><span class="sxs-lookup"><span data-stu-id="33fbf-109">The model</span></span>

<span data-ttu-id="33fbf-110">Avec EF Core, l’accès aux données est effectué à l’aide d’un modèle.</span><span class="sxs-lookup"><span data-stu-id="33fbf-110">With EF Core, data access is performed using a model.</span></span> <span data-ttu-id="33fbf-111">Un modèle est constitué de classes d’entité et d’un objet de contexte qui représente une session avec la base de données.</span><span class="sxs-lookup"><span data-stu-id="33fbf-111">A model is made up of entity classes and a context object that represents a session with the database.</span></span> <span data-ttu-id="33fbf-112">L’objet Context permet l’interrogation et l’enregistrement des données.</span><span class="sxs-lookup"><span data-stu-id="33fbf-112">The context object allows querying and saving data.</span></span> <span data-ttu-id="33fbf-113">Pour plus d’informations, consultez [création d’un modèle](xref:core/modeling/index).</span><span class="sxs-lookup"><span data-stu-id="33fbf-113">For more information, see [Creating a Model](xref:core/modeling/index).</span></span>

<span data-ttu-id="33fbf-114">EF prend en charge les approches de développement de modèle suivantes :</span><span class="sxs-lookup"><span data-stu-id="33fbf-114">EF supports the following model development approaches:</span></span>

* <span data-ttu-id="33fbf-115">Générez un modèle à partir d’une base de données existante.</span><span class="sxs-lookup"><span data-stu-id="33fbf-115">Generate a model from an existing database.</span></span>
* <span data-ttu-id="33fbf-116">Codez manuellement un modèle pour qu’il corresponde à la base de données.</span><span class="sxs-lookup"><span data-stu-id="33fbf-116">Hand code a model to match the database.</span></span>
* <span data-ttu-id="33fbf-117">Une fois qu’un modèle est créé, utilisez des [migrations EF](xref:core/managing-schemas/migrations/index) pour créer une base de données à partir du modèle.</span><span class="sxs-lookup"><span data-stu-id="33fbf-117">Once a model is created, use [EF Migrations](xref:core/managing-schemas/migrations/index) to create a database from the model.</span></span> <span data-ttu-id="33fbf-118">Les migrations permettent d’évoluer la base de données à mesure que le modèle change.</span><span class="sxs-lookup"><span data-stu-id="33fbf-118">Migrations allow evolving the database as the model changes.</span></span>

[!code-csharp[Main](../../samples/core/Intro/Model.cs)]

## <a name="querying"></a><span data-ttu-id="33fbf-119">Interrogation</span><span class="sxs-lookup"><span data-stu-id="33fbf-119">Querying</span></span>

<span data-ttu-id="33fbf-120">Les instances de vos classes d’entité sont récupérées à partir de la base de données à l’aide de [LINQ (Language Integrated Query)](/dotnet/csharp/programming-guide/concepts/linq/).</span><span class="sxs-lookup"><span data-stu-id="33fbf-120">Instances of your entity classes are retrieved from the database using [Language Integrated Query (LINQ)](/dotnet/csharp/programming-guide/concepts/linq/).</span></span> <span data-ttu-id="33fbf-121">Pour plus d’informations, consultez [interrogation des données](xref:core/querying/index).</span><span class="sxs-lookup"><span data-stu-id="33fbf-121">For more information, see [Querying Data](xref:core/querying/index).</span></span>

[!code-csharp[Main](../../samples/core/Intro/Program.cs#Querying)]

## <a name="saving-data"></a><span data-ttu-id="33fbf-122">Enregistrement des données</span><span class="sxs-lookup"><span data-stu-id="33fbf-122">Saving data</span></span>

<span data-ttu-id="33fbf-123">Les données sont créées, supprimées et modifiées dans la base de données à l’aide d’instances de vos classes d’entité.</span><span class="sxs-lookup"><span data-stu-id="33fbf-123">Data is created, deleted, and modified in the database using instances of your entity classes.</span></span> <span data-ttu-id="33fbf-124">Pour en savoir plus, consultez [Enregistrement de données](xref:core/saving/index).</span><span class="sxs-lookup"><span data-stu-id="33fbf-124">See [Saving Data](xref:core/saving/index) to learn more.</span></span>

[!code-csharp[Main](../../samples/core/Intro/Program.cs#SavingData)]

## <a name="ef-orm-considerations"></a><span data-ttu-id="33fbf-125">Considérations relatives à EF O/RM</span><span class="sxs-lookup"><span data-stu-id="33fbf-125">EF O/RM considerations</span></span>

<span data-ttu-id="33fbf-126">Bien que EF Core soit parfait pour extraire de nombreux détails de programmation, il existe des meilleures pratiques applicables à n’importe quel O/RM qui permettent d’éviter les pièges courants dans les applications de production :</span><span class="sxs-lookup"><span data-stu-id="33fbf-126">While EF Core is good at abstracting many programming details, there are some best practices applicable to any O/RM that help to avoid common pitfalls in production apps:</span></span>

* <span data-ttu-id="33fbf-127">La connaissance au niveau intermédiaire ou supérieure du serveur de base de données sous-jacent est essentielle pour l’architecture, le débogage, le profilage et la migration des données dans des applications de production hautes performances.</span><span class="sxs-lookup"><span data-stu-id="33fbf-127">Intermediate-level knowledge or higher of the underlying database server is essential to architect, debug, profile, and migrate data in high performance production apps.</span></span> <span data-ttu-id="33fbf-128">Par exemple, la connaissance des clés primaires et étrangères, des contraintes, des index, de la normalisation, des instructions DML et DDL, des types de données, du profilage, etc.</span><span class="sxs-lookup"><span data-stu-id="33fbf-128">For example, knowledge of primary and foreign keys, constraints, indexes, normalization, DML and DDL statements, data types, profiling, etc.</span></span>
* <span data-ttu-id="33fbf-129">Test fonctionnel et d’intégration : il est important de répliquer l’environnement de production le plus fidèlement possible à :</span><span class="sxs-lookup"><span data-stu-id="33fbf-129">Functional and integration testing:  It's important to replicate the production environment as closely as possible to:</span></span>
  * <span data-ttu-id="33fbf-130">Identifiez les problèmes de l’application qui s’affichent uniquement lors de l’utilisation d’une version ou d’une édition spécifique du serveur de base de données.</span><span class="sxs-lookup"><span data-stu-id="33fbf-130">Find issues in the app that only show up when using a specific versions or edition of the database server .</span></span>
  * <span data-ttu-id="33fbf-131">Interceptez les modifications importantes lors de la mise à niveau de EF Core et d’autres dépendances.</span><span class="sxs-lookup"><span data-stu-id="33fbf-131">Catch breaking changes when upgrading EF Core and other dependencies.</span></span> <span data-ttu-id="33fbf-132">Par exemple, l’ajout ou la mise à niveau d’infrastructures comme ASP.NET Core, OData ou AutoMapper.</span><span class="sxs-lookup"><span data-stu-id="33fbf-132">For example, adding or upgrading frameworks like ASP.NET Core, OData, or Automapper.</span></span> <span data-ttu-id="33fbf-133">Ces dépendances peuvent affecter EF Core de façon inattendue.</span><span class="sxs-lookup"><span data-stu-id="33fbf-133">These dependencies can affect EF Core in unexpected ways.</span></span>
* <span data-ttu-id="33fbf-134">Tests de performances et de stress avec charges représentatives.</span><span class="sxs-lookup"><span data-stu-id="33fbf-134">Performance and stress testing with representative loads.</span></span> <span data-ttu-id="33fbf-135">L’utilisation naïve de certaines fonctionnalités n’est pas très adaptée.</span><span class="sxs-lookup"><span data-stu-id="33fbf-135">The naïve usage of some features doesn't scale well.</span></span> <span data-ttu-id="33fbf-136">Par exemple, plusieurs collections incluent, une utilisation intensive du chargement différé, des requêtes conditionnelles sur des colonnes non indexées, des mises à jour massives et des insertions avec des valeurs générées par le magasin, un manque de gestion de la concurrence, des modèles volumineux et une stratégie de cache inadéquate.</span><span class="sxs-lookup"><span data-stu-id="33fbf-136">For example, multiple collections Includes, heavy use of lazy loading, conditional queries on non-indexed columns, massive updates and inserts with store-generated values, lack of concurrency handling, large models, inadequate cache policy.</span></span>
* <span data-ttu-id="33fbf-137">Révision de sécurité : par exemple, la gestion des chaînes de connexion et d’autres secrets, les autorisations de base de données pour une opération de non-déploiement, la validation d’entrée pour SQL brut, le chiffrement pour les données sensibles.</span><span class="sxs-lookup"><span data-stu-id="33fbf-137">Security review: For example, handling of connection strings and other secrets, database permissions for non-deployment operation, input validation for raw SQL, encryption for sensitive data.</span></span>
* <span data-ttu-id="33fbf-138">Assurez-vous que la journalisation et les diagnostics sont suffisants et utilisables.</span><span class="sxs-lookup"><span data-stu-id="33fbf-138">Make sure logging and diagnostics are sufficient and usable.</span></span> <span data-ttu-id="33fbf-139">Par exemple, une configuration de journalisation appropriée, des étiquettes de requête et des Application Insights.</span><span class="sxs-lookup"><span data-stu-id="33fbf-139">For example, appropriate logging configuration, query tags, and Application Insights.</span></span>
* <span data-ttu-id="33fbf-140">Récupération d’erreur.</span><span class="sxs-lookup"><span data-stu-id="33fbf-140">Error recovery.</span></span> <span data-ttu-id="33fbf-141">Préparez les éventualités pour les scénarios d’échec courants tels que la restauration de la version, les serveurs de secours, la montée en puissance parallèle et l’équilibrage de charge, l’atténuation des attaques et les sauvegardes de données.</span><span class="sxs-lookup"><span data-stu-id="33fbf-141">Prepare contingencies for common failure scenarios such as version rollback, fallback servers, scale-out and load balancing, DoS mitigation, and data backups.</span></span>
* <span data-ttu-id="33fbf-142">Déploiement et migration d’applications.</span><span class="sxs-lookup"><span data-stu-id="33fbf-142">Application deployment and migration.</span></span> <span data-ttu-id="33fbf-143">Planifier l’application des migrations pendant le déploiement ; le fait de le faire au démarrage de l’application peut pâtir de problèmes d’accès concurrentiel et nécessite des autorisations supérieures à celles nécessaires pour un fonctionnement normal.</span><span class="sxs-lookup"><span data-stu-id="33fbf-143">Plan out how migrations are going to be applied during deployment; doing it at application start can suffer from concurrency issues and requires higher permissions than necessary for normal operation.</span></span> <span data-ttu-id="33fbf-144">Utilisez la mise en lots pour faciliter la récupération après des erreurs irrécupérables pendant la migration.</span><span class="sxs-lookup"><span data-stu-id="33fbf-144">Use staging to facilitate recovery from fatal errors during migration.</span></span> <span data-ttu-id="33fbf-145">Pour plus d’informations, consultez [application de migrations](xref:core/managing-schemas/migrations/applying).</span><span class="sxs-lookup"><span data-stu-id="33fbf-145">For more information, see [Applying Migrations](xref:core/managing-schemas/migrations/applying).</span></span>
* <span data-ttu-id="33fbf-146">Examen et test détaillés des migrations générées.</span><span class="sxs-lookup"><span data-stu-id="33fbf-146">Detailed examination and testing of generated migrations.</span></span> <span data-ttu-id="33fbf-147">Les migrations doivent être testées minutieusement avant d’être appliquées aux données de production.</span><span class="sxs-lookup"><span data-stu-id="33fbf-147">Migrations should be thoroughly tested before being applied to production data.</span></span> <span data-ttu-id="33fbf-148">La forme du schéma et les types de colonnes ne peuvent pas être facilement modifiées une fois que les tables contiennent des données de production.</span><span class="sxs-lookup"><span data-stu-id="33fbf-148">The shape of the schema and the column types cannot be easily changed once the tables contain production data.</span></span> <span data-ttu-id="33fbf-149">Par exemple, sur SQL Server, `nvarchar(max)` et `decimal(18, 2)` sont rarement les meilleurs types pour les colonnes mappées à des propriétés de type chaîne et décimale, mais il s’agit des valeurs par défaut que EF utilise, car il n’a pas connaissance de votre scénario spécifique.</span><span class="sxs-lookup"><span data-stu-id="33fbf-149">For example, on SQL Server, `nvarchar(max)` and `decimal(18, 2)` are rarely the best types for columns mapped to string and decimal properties, but those are the defaults that EF uses because it doesn't have knowledge of your specific scenario.</span></span>

## <a name="next-steps"></a><span data-ttu-id="33fbf-150">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="33fbf-150">Next steps</span></span>

<span data-ttu-id="33fbf-151">Pour des tutoriels d’introduction, consultez [Bien démarrer avec Entity Framework Core](xref:core/get-started/overview/first-app).</span><span class="sxs-lookup"><span data-stu-id="33fbf-151">For introductory tutorials, see [Getting Started with Entity Framework Core](xref:core/get-started/overview/first-app).</span></span>
