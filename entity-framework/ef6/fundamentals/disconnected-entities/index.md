---
title: Utilisation d’entités déconnectées - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 12138003-a373-4817-b1b7-724130202f5f
ms.openlocfilehash: f1ce44e7b00ec4c60a81ed850ce5c9d866495e1b
ms.sourcegitcommit: cc0ff36e46e9ed3527638f7208000e8521faef2e
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78413364"
---
# <a name="working-with-disconnected-entities"></a><span data-ttu-id="d18e1-102">Utilisation d’entités déconnectées</span><span class="sxs-lookup"><span data-stu-id="d18e1-102">Working with disconnected entities</span></span>
<span data-ttu-id="d18e1-103">Dans une application Entity Framework, une classe de contexte détecte les changements des entités suivies.</span><span class="sxs-lookup"><span data-stu-id="d18e1-103">In an Entity Framework-based application, a context class is responsible for detecting changes applied to tracked entities.</span></span> <span data-ttu-id="d18e1-104">La méthode SaveChanges conserve les changements détectés par le contexte dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="d18e1-104">Calling the SaveChanges method persists the changes tracked by the context to the database.</span></span> <span data-ttu-id="d18e1-105">Quand vous utilisez des applications multicouches, les objets d’entité sont généralement modifiés quand ils sont déconnectés du contexte, et vous devez choisir à la fois comment suivre les changements et comment les signaler au contexte.</span><span class="sxs-lookup"><span data-stu-id="d18e1-105">When working with n-tier applications, entity objects are usually modified while disconnected from the context, and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="d18e1-106">Cette rubrique décrit les différentes options disponibles quand vous utilisez Entity Framework avec des entités déconnectées.</span><span class="sxs-lookup"><span data-stu-id="d18e1-106">This topic discusses different options that are available when using Entity Framework with disconnected entities.</span></span>   

## <a name="web-service-frameworks"></a><span data-ttu-id="d18e1-107">Frameworks de service web</span><span class="sxs-lookup"><span data-stu-id="d18e1-107">Web service frameworks</span></span>

<span data-ttu-id="d18e1-108">Les technologies de services web prennent généralement en charge des modèles pouvant servir à conserver les changements sur des objets déconnectés individuels.</span><span class="sxs-lookup"><span data-stu-id="d18e1-108">Web services technologies typically support patterns that can be used to persist changes on individual disconnected objects.</span></span> <span data-ttu-id="d18e1-109">Par exemple, l’API Web ASP.NET vous permet de codifier des actions de contrôleur pouvant inclure des appels à EF pour conserver les changements d’un objet dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="d18e1-109">For example, ASP.NET Web API allows you to code controller actions that can include calls to EF to persist changes made to an object on a database.</span></span> <span data-ttu-id="d18e1-110">En fait, les outils d’API Web dans Visual Studio facilitent la génération automatique d’un contrôleur API Web à partir de votre modèle Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="d18e1-110">In fact, the Web API tooling in Visual Studio makes it easy to scaffold a Web API controller from your Entity Framework 6 model.</span></span> <span data-ttu-id="d18e1-111">Pour plus d’informations, consultez [Utilisation de l’API Web avec Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span><span class="sxs-lookup"><span data-stu-id="d18e1-111">For more information, see [using Web API with Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span></span>   

<span data-ttu-id="d18e1-112">Historiquement, plusieurs autres technologies de services web ont offert une intégration à Entity Framework, par exemple, [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) et [Services RIA](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span><span class="sxs-lookup"><span data-stu-id="d18e1-112">Historically, there have been several other Web services technologies that offered integration with Entity Framework, like [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) and [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span></span>

## <a name="low-level-ef-apis"></a><span data-ttu-id="d18e1-113">API EF de bas niveau</span><span class="sxs-lookup"><span data-stu-id="d18e1-113">Low-level EF APIs</span></span>

<span data-ttu-id="d18e1-114">Si vous ne voulez pas utiliser de solution multicouche existante ou que vous voulez personnaliser une action de contrôleur dans les services d’API Web, Entity Framework fournit des API qui vous permettent d’appliquer les changements d’une couche déconnectée.</span><span class="sxs-lookup"><span data-stu-id="d18e1-114">If you don't want to use an existing n-tier solution, or if you want to customize what happens inside a controller action in a Web API services, Entity Framework provides APIs that allow you to apply changes made on a disconnected tier.</span></span> <span data-ttu-id="d18e1-115">Pour plus d’informations, consultez [Add, Attach et état d’entité](~/ef6/saving/change-tracking/entity-state.md).</span><span class="sxs-lookup"><span data-stu-id="d18e1-115">For more information, see [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md).</span></span>  

## <a name="self-tracking-entities"></a><span data-ttu-id="d18e1-116">Entités de suivi automatique</span><span class="sxs-lookup"><span data-stu-id="d18e1-116">Self-Tracking Entities</span></span>  

<span data-ttu-id="d18e1-117">Suivre les changements sur des graphiques d’entité arbitraires déconnectés du contexte EF n’est pas chose simple.</span><span class="sxs-lookup"><span data-stu-id="d18e1-117">Tracking changes on arbitrary graphs of entities while disconnected from the EF context is a hard problem.</span></span> <span data-ttu-id="d18e1-118">Le problème a été partiellement résolu par le modèle de génération de code des entités de suivi automatique.</span><span class="sxs-lookup"><span data-stu-id="d18e1-118">One of the attempts to solve it was the Self-Tracking Entities code generation template.</span></span> <span data-ttu-id="d18e1-119">Ce modèle génère des classes d’entité qui contiennent une logique pour suivre les changements d’une couche déconnectée, comme l’état dans les entités elles-mêmes.</span><span class="sxs-lookup"><span data-stu-id="d18e1-119">This template generates entity classes that contain logic to track changes made on a disconnected tier as state in the entities themselves.</span></span> <span data-ttu-id="d18e1-120">Un ensemble de méthodes d’extension est également généré pour appliquer ces changements à un contexte.</span><span class="sxs-lookup"><span data-stu-id="d18e1-120">A set of extension methods is also generated to apply those changes to a context.</span></span>

<span data-ttu-id="d18e1-121">Ce modèle peut être utilisé avec des modèles créés à l’aide d’EF Designer, mais ne peut pas être utilisé avec des modèles Code First.</span><span class="sxs-lookup"><span data-stu-id="d18e1-121">This template can be used with models created using the EF Designer, but can not be used with Code First models.</span></span> <span data-ttu-id="d18e1-122">Pour plus d’informations, consultez [Entités de suivi automatique](self-tracking-entities/index.md).</span><span class="sxs-lookup"><span data-stu-id="d18e1-122">For more information, see [Self-Tracking Entities](self-tracking-entities/index.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="d18e1-123">Nous ne recommandons plus d’utiliser le modèle des entités de suivi automatique.</span><span class="sxs-lookup"><span data-stu-id="d18e1-123">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="d18e1-124">Il reste disponible uniquement pour prendre en charge les applications existantes.</span><span class="sxs-lookup"><span data-stu-id="d18e1-124">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="d18e1-125">Si votre application doit utiliser des graphiques d’entités déconnectés, envisagez d’autres alternatives comme les [Entités traçables](https://trackableentities.github.io/), qui présentent une technologie similaire aux entités de suivi automatique, mais développée de manière plus active par la communauté, ou bien l’écriture de code personnalisé à l’aide des API de suivi de changements de bas niveau.</span><span class="sxs-lookup"><span data-stu-id="d18e1-125">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](https://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>
